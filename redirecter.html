<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecter</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
</head>

<body>
    <div id="controll" style="text-align: center;">
        <div style="text-align: center;">
            <input id="input" value="https://" autofocus style="width: 80vw;font-size: 30px;">
        </div>

        <div onclick="ini()"
            style="z-index: -1;position: absolute;top: 0;width: 100vw;height: 50vh;left: 0;background-color: rgb(213, 213, 213);">
        </div>
        <div onclick="init()"
            style="z-index: -1;position: absolute;bottom: 0;width: 100vw;height: 50vh;left: 0;background-color: rgb(157, 157, 157);">
        </div>
        <a id="anker" style="position: absolute;left: 45vw;top: 45vh;" href="links.html?">リンク集へ→</a>
    </div>
    <iframe id="iframe" src="./"
        sandbox="allow-forms allow-modals allow-pointer-lock allow-popups allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation"
        style="position: absolute;width: 100vw;height: 100vh;z-index: -100;top: 0;left: 0;"></iframe>

    <div id="back" onclick="backing()"
        style="z-index: 200;opacity: 0;position: absolute;right: 1vw;bottom: 1vw;width: 50px;height: 50px;background-color: black;color: white;font-size: 30px;text-align: center;padding-top: 5px;">
        ←</div>
    <script>
        const nowUrl = window.location.href;
        try {
            const params = nowUrl.split("?")[1].split("=");
            const paramData = params[1];
            input.value = paramData;
        } catch {

        }
        const d = document.getElementById("input");
        const frame = document.getElementById("iframe");
        const back = document.getElementById("back");
        const controll = document.getElementById("controll");
        const anker = document.getElementById("anker");

        let list = [];
        d.addEventListener("change", () => {
            url = d.value;
            if (url !== "https://") {
                list.push(url);
                anker.href += "+" + url;
            }
        })
        function init() {
            const url = d.value;
            try {
                window.location = url;
            } catch {
                window.location = encodeURI("https://www.google.com/search?q=" + url);
            }
        }
        function ini() {
            const url = d.value;
            iframe.src = url;
            iframe.style.zIndex = 100;
            back.style.opacity = 1;
            controll.style.opacity = 0;
        }
        function backing() {
            iframe.style.zIndex = -100;
            back.style.opacity = 0;
            controll.style.opacity = 1;
        }
    </script>
</body>

</html>